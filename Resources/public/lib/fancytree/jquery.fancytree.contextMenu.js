!function(e){"function"==typeof define&&define.amd?define(["jquery","jquery-ui/ui/widget","jquery-ui/ui/position","jquery-ui/ui/keycode","jquery-ui/ui/scroll-parent","jquery-ui/ui/unique-id","jquery-ui/ui/widgets/contextmenu","fancytree/jquery.fancytree"],e):"object"==typeof module&&module.exports?(require("./jquery.fancytree"),module.exports=e(require("jquery"))):e(jQuery)}(function(r){"use strict";return r.ui.fancytree.registerExtension({name:"contextMenu",version:"@VERSION",contextMenu:{selector:"fancytree-title",menu:{},actions:{}},treeInit:function(e){var t,o,i,u;this._superApply(arguments),t=e.tree,o=e.options.contextMenu.selector||"fancytree-title",i=e.options.contextMenu.menu,u=e.options.contextMenu.actions,t.$container.on("mousedown.contextMenu",function(e){var n=r.ui.fancytree.getNode(e);n&&(r.contextMenu("destroy","."+o),n.setActive(!0),r.contextMenu({selector:"."+o,events:{show:function(e){e.prevKeyboard=t.options.keyboard,t.options.keyboard=!1},hide:function(e){t.options.keyboard=e.prevKeyboard,n.setFocus(!0)}},build:function(e,t){n=r.ui.fancytree.getNode(e);e={};return r.isFunction(i)?e=i(n):r.isPlainObject(i)&&(e=i),{callback:function(e,t){r.isFunction(u)?u(n,e,t):r.isPlainObject(u)&&Object.prototype.hasOwnProperty.call(u,e)&&r.isFunction(u[e])&&u[e](n,t)},items:e}}}))})}}),r.ui.fancytree});
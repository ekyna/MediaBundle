define("ekyna-media/thumb",["require","jquery","routing","ekyna-modal","ekyna-media/player","fancybox"],function(n,o,r,i,a){let e=!1,d;function l(e){const n=e.data("media");n.hasOwnProperty("path")?window.open(r.generate("ekyna_media_download",{key:e.data("media").path}),"_blank"):console.error("Path data is not set.")}return{init:function(){e||(e=!0,o(document).on("click",'.media-thumb [data-role="show"]',function(n){n.preventDefault(),n.stopPropagation();{let e=(n=o(n.currentTarget).parents(".media-thumb")).data("media");if(e.hasOwnProperty("type"))if("file"!==e.type)if(e.hasOwnProperty("player")){const t={src:e.player};"image"===e.type?t.type="image":(t.type="ajax",t.beforeShow=function(){a.init(o(".fancybox-stage"))},t.beforeClose=function(){a.destroy(o(".fancybox-stage"))}),o.fancybox.open(t)}else console.error("Type data is not set.");else l(n);else console.error("Type data is not set.")}return!1}).on("click",'.media-thumb [data-role="download"]',function(e){return e.preventDefault(),e.stopPropagation(),l(o(e.currentTarget).parents(".media-thumb")),!1}).on("click",'.media-thumb [data-role="browse"]',function(e){e.preventDefault(),e.stopPropagation();{const a=(e=o(e.currentTarget).parents(".media-thumb")).data("media");if(a.hasOwnProperty("folderId")){let t;d?d.hide():d=new i,n(["ekyna-media/browser"],function(n){o(d).on("ekyna.modal.content",function(e){if("html"!==e.contentType)throw"Unexpected modal content type.";t=new n(e.content)}),o(d).on("ekyna.modal.shown",function(){t&&t.init()}),o(d).on("ekyna.modal.hide",function(){t=t&&null,d=null}),d.load({url:r.generate("admin_ekyna_media_browser_modal",{folderId:a.folderId})})})}else console.error("Folder id data is not set.")}return!1}))}}});